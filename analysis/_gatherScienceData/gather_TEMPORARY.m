clear composite_data
composite_data = struct;
index=1;
%% Introduction


% %% 2024/11/28-2024/11/29
% %201.1 G high field 50 ms mod ramp 11/22-11/23 vary evap depth
% composite_data(index).Name = '11/28-11/29 201.1 G 4 V';
% composite_data(index).Description = '201.1 G high field, 2.5Er, 50 ms mod ramp, 4V, Full Spectrum';
% composite_data(index).Runs= [ 
%         2024 11 28 04;
%         2024 11 28 05;
%         2024 11 28 06;
%         2024 11 28 07;
%         2024 11 28 08;
%         2024 11 28 09;
%         2024 11 28 10;
%         2024 11 28 11;        
%         2024 11 28 12;
%         
%         2024 11 29 01;
%         2024 11 29 02;
%         2024 11 29 03;
%         2024 11 29 04;
%         2024 11 29 05;
%         2024 11 29 06;
%         2024 11 29 07;
%         2024 11 29 08;
%         2024 11 29 09;
%         2024 11 29 10;
%                 
%     ];
% index=index+1;

%% 2024/12/03-2024/12/04
% 
% %Single frequency 54 Hz, vary field evap depth and pulse depth
% 
% % 2.5 Er, 50 ms mod ramp, 190 G, 64-70 mW, 0 Er
% composite_data(index).Name = '2024_12_03 54 Hz, 190 G, 64-70 mW, 0 Er, 0.4 V';
% composite_data(index).Description = '54 Hz, 2.5 Er, 50 ms mod ramp, 190 G, 64-70 mW, 0 Er pulse, 0.4 V';
% composite_data(index).Type = 'peak';
% composite_data(index).Runs = [     
%     2024 12 03 19;
%     2024 12 03 21;
%     2024 12 03 23;
%     2024 12 04 02;
%     2024 12 04 12;
%     ];
% 
% index=index+1;
% 
% % 2.5 Er, 50 ms mod ramp, 190 G, 64-70 mW, 4 Er pulse
% composite_data(index).Name = '2024_12_03 54 Hz, 190 G, 64-70 mW, 4 Er, 0.4 V';
% composite_data(index).Description = '54 Hz, 2.5 Er, 50 ms mod ramp, 190 G, 64-70 mW, 4 Er pulse, 0.4 V';
% composite_data(index).Type = 'peak';
% composite_data(index).Runs = [     
%     2024 12 03 18;
%     2024 12 03 20;
%     2024 12 03 22;
%     2024 12 04 01;
%     2024 12 04 11;
%     2024 12 04 13;
%     ];
% 
% index=index+1;
% 
% % 2.5 Er, 50 ms mod ramp, 200G, 64-70 mW, 0 Er pulse
% composite_data(index).Name = '2024_12_03 54 Hz, 200 G, 64-70 mW, 0 Er, 0.8 V';
% composite_data(index).Description = '54 Hz, 2.5 Er, 50 ms mod ramp, 200G, 64-70 mW, 0 Er pulse, 0.8 V';
% composite_data(index).Type = 'peak';
% composite_data(index).Runs = [     
%     2024 12 04 04;
%     2024 12 04 06;
%     2024 12 04 08;
%     2024 12 04 10;
%     ];
% 
% index=index+1;
% 
% % 2.5 Er, 50 ms mod ramp, 200G, 64-70 mW, 4 Er pulse
% composite_data(index).Name = '2024_12_03 54 Hz, 200 G, 64-70 mW, 4 Er, 0.8 V';
% composite_data(index).Description = '54 Hz, 2.5 Er, 50 ms mod ramp, 200G, 64-70 mW, 4 Er pulse, 0.8 V';
% composite_data(index).Type = 'peak';
% composite_data(index).Runs = [     
%     2024 12 04 03;
%     2024 12 04 05;
%     2024 12 04 07;
%     2024 12 04 09;
%     ];
% 
% index=index+1;

% % 2.5 Er, 50 ms mod ramp, 200G, 64-70 mW, 4 Er pulse
% composite_data(index).Name = '2024_12_05 201.1 G 64.5 mW spectrum';
% composite_data(index).Description = '2.5 Er, 50 ms mod ramp, 201.1 G, 64.5 mW';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [    
%     2024 12 05 01;
%     2024 12 05 02;
%     2024 12 05 03;
%     2024 12 05 04;
%     2024 12 05 05;
%     2024 12 06 01;
%     2024 12 06 02;
%     2024 12 06 03;
%     2024 12 06 04;
%     2024 12 06 05;
%     2024 12 06 06;
%     2024 12 06 07;
%     2024 12 06 08;
%     2024 12 06 09;
%     2024 12 06 10;
%     2024 12 06 11;
%     2024 12 06 12;
%     ];

% index=index+1;


%% 12/09-12/10

% % 2.5 Er, 50 ms mod ramp, 200G, 64-70 mW, 4 Er pulse
% composite_data(index).Name = '2024_12_09 201.1 G 66.5 mW 5 Er pulse spectrum';
% composite_data(index).Description = '2.5 Er, 50 ms mod ramp, 66.5 mW 5 Er pulse spectrum';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [    
%     2024 12 09 02;
%     2024 12 09 03;
%     2024 12 09 04;
%     2024 12 09 05;
%     2024 12 09 06;
%     2024 12 10 01;
%     2024 12 10 02;
%     2024 12 10 03;
%     2024 12 10 04;
%     2024 12 10 05;
%     2024 12 10 06;
%     2024 12 10 07;
%     2024 12 10 08;
%     2024 12 10 09;
%     2024 12 10 10;
%     2024 12 10 11;
%     2024 12 10 12;
%     2024 12 10 13;
%     2024 12 10 14;
%     ];
% 
% index=index+1;

%%
% %% 12/11-12/12
% 
% % 2.5 Er, 50 ms mod ramp, 200G, 64-70 mW, 4 Er pulse
% composite_data(index).Name = '2024_12_11 201.1 G 66.5 mW 5 Er pulse spectrum, -12 plane shift';
% composite_data(index).Description = '2.5 Er, 50 ms mod ramp, 66.5 mW 5 Er pulse spectrum, -12 plane shift';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [    
%     2024 12 11 19;
%     2024 12 11 20;
%     2024 12 11 21;
%     2024 12 11 22;
%     2024 12 11 23;
%     2024 12 11 24;
%     2024 12 11 25;
%     2024 12 12 01;
%     2024 12 12 02;
%     2024 12 12 03;
%     ];
% 
% index=index+1;
% 
% % 2.5 Er, 50 ms mod ramp, 201.1 G, 66.5 mW, 5 Er pulse
% composite_data(index).Name = '2024_12_11 201.1 G 66.5 mW 5 Er pulse spectrum, -8 plane shift';
% composite_data(index).Description = '2.5 Er, 50 ms mod ramp, 66.5 mW 5 Er pulse spectrum, -8 plane shift';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [    
%     2024 12 12 04;
%     2024 12 12 05;
%     2024 12 12 06;
%     2024 12 12 07;
%     2024 12 12 08;
%     2024 12 12 09;
%     2024 12 12 10;
%     2024 12 12 11;
%     2024 12 12 12;
%     2024 12 12 13;
%     ];
% 
% index=index+1;
% %% 54 Hz cond v U, 66.5 mW, 5 Er pulse
% composite_data(index).Name = '2024_12_12 54 Hz 66.5 mW 5 Er pulse vary U';
% composite_data(index).Description = '2.5 Er, 54 Hz, 50 ms mod ramp, 66.5 mW 5 Er pulse, vary U';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [     
%     2024 12 12 15;
%     2024 12 12 16;
%     2024 12 12 17;
%     2024 12 12 18;
%     2024 12 12 19;
%     2024 12 12 20;
%     2024 12 12 21;
%     2024 12 13 01;
%     2024 12 13 02;
%     2024 12 13 03;
%     2024 12 13 04;
%     2024 12 13 05;
%     2024 12 13 06;
%     2024 12 13 07;
%     2024 12 13 08;
%     2024 12 13 09;
%     2024 12 13 10;
%     2024 12 13 11;
%     2024 12 13 12;
%     2024 12 13 13;
%     2024 12 13 14;
%     2024 12 13 15;
%     ];
%% Retake March data
% 200.9 G
% composite_data(index).Name = '2024_12_12 200.9 G spectrum';
% composite_data(index).Description = '2.5 Er, 200.9 G, 66.5 mW 4.5 Er pulse';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [     
%     2024 12 13 16;
%     2024 12 13 17;
%     2024 12 13 18;
%     2024 12 13 19;
%     2024 12 13 20;
%     2024 12 13 21;
%     2024 12 13 22;
%     2024 12 14 01;
%     2024 12 14 02;
%     2024 12 14 03;
%     ];
% index = index +1;
% 
% % 190 G, 6.5 Er pulse
% composite_data(index).Name = '2024_12_12 190 G spectrum';
% composite_data(index).Description = '2.5 Er, 190 G, 66.5 mW 6.5 Er pulse';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [     
%     2024 12 14 04;
%     2024 12 14 05;
%     2024 12 14 06;
%     2024 12 14 07;
%     2024 12 14 08;
%     2024 12 14 09;
%     2024 12 14 10;
%     2024 12 14 11;
%     2024 12 14 12;
%     2024 12 14 13;
%     ];
% index = index +1;
% 
% % 200.65 G, 5 Er pulse
% composite_data(index).Name = '2024_12_12 200.65 G spectrum';
% composite_data(index).Description = '2.5 Er, 200.65 G, 66.5 mW 5 Er pulse';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [     
%     2024 12 14 14;
%     2024 12 14 15;
%     2024 12 14 16;
%     2024 12 14 17;
%     2024 12 14 18;
%     2024 12 14 19;
%     2024 12 14 20;
%     2024 12 14 21;
%     2024 12 14 22;
%     2024 12 14 23;
%     
% 
%     ];
% index = index +1;
% 
% % 195 G, 6 Er pulse
% composite_data(index).Name = '2024_12_12 195 G spectrum';
% composite_data(index).Description = '2.5 Er, 195 G, 66.5 mW 6 Er pulse';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [     
%     2024 12 14 24;
%     2024 12 14 25;
%     2024 12 14 26;
%     2024 12 14 27;
%     2024 12 15 01;
%     2024 12 15 02;
%     2024 12 15 03;
%     2024 12 15 04;
% %     2024 12 15 05;no atom :-(
% %     2024 12 15 06;
% 
%     ];
% index = index +1;

% Retake retake March data
%200 G, 5 Er pulse
% composite_data(index).Name = '2024_12_19 200 G spectrum';
% composite_data(index).Description = '2.5 Er, 200 G, 66.5 mW 5 Er pulse';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [     
%     2024 12 19 01;
% %     2024 12 19 02; % no signal
%     2024 12 19 03;
%     2024 12 19 04;
%     2024 12 19 05;
%     2024 12 19 06;
%     2024 12 19 07;
%     2024 12 19 08;
% %     2024 12 20 01; % no signal
%     2024 12 20 02;
%     ];
% index = index +1;
% 
% % 200.9 G, 4.5 Er pulse
% composite_data(index).Name = '2024_12_19 200.9 G spectrum';
% composite_data(index).Description = '2.5 Er, 200.9 G, 66.5 mW 4.5 Er pulse';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [     
%     2024 12 20 03;
%     2024 12 20 04;
%     2024 12 20 05;
%     2024 12 20 06;
%     2024 12 20 07;
%     2024 12 20 08;
%     2024 12 20 09;
%     2024 12 20 10;
% %     2024 12 20 11; % no signal
%     2024 12 20 12;
%     ];
% index = index +1;

%%
% % 200G, 3 Er pulse
% composite_data(index).Name = '2025_01_14 200 G spectrum';
% composite_data(index).Description = '2.5 Er, 200 G, 66 mW 3 Er pulse';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [     
%     2025 01 14 06;
%     2025 01 14 07;
%     2025 01 14 08;
%     2025 01 14 09;
%     2025 01 14 10;
%     2025 01 14 11;
%     ];
% index = index +1;

%%
% % 200G, 3.5 Er pulse
% composite_data(index).Name = '2025_01_15 200 G spectrum';
% composite_data(index).Description = '2.5 Er, 200 G, 66 mW 3.5 Er pulse';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [     
%     2025 01 15 11;
%     2025 01 15 12;
%     2025 01 15 13;
%     2025 01 15 14;
%     2025 01 15 15;
%     2025 01 15 16;
%     2025 01 16 01;
%     2025 01 16 02;
%     2025 01 16 03;
%     2025 01 16 04;
%     ];
% index = index +1;

 %% 
% % 190G, 4.5 Er pulse
% composite_data(index).Name = '2025_01_16 190 G spectrum';
% composite_data(index).Description = '2.5 Er, 190 G, 66 mW 4.5 Er pulse';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [     
%     2025 01 16 05;
%     2025 01 16 06;
%     2025 01 16 07;
% %     2025 01 16 08; could not bin, too out of focus
%     2025 01 16 09;
%     2025 01 16 10;
%     2025 01 16 11;
%     2025 01 16 12;
%     2025 01 16 13;
%     2025 01 16 14;
%     ];
% index = index +1;

%% 
% % 201.1G, 4 Er pulse
% composite_data(index).Name = '2025_01_23 201.1 G spectrum';
% composite_data(index).Description = '2.5 Er, 201.1 G, 64 mW 4 Er pulse';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [     
%     2025 01 23 07;
%     2025 01 23 08;
%     2025 01 23 09;
%     2025 01 23 10;
%     2025 01 23 11;
%     2025 01 23 12;
%     2025 01 24 01;
%     2025 01 24 02;
%     2025 01 24 03;
%     2025 01 24 04;
%     2025 01 24 05;
%     2025 01 24 06;
%     2025 01 24 07;
%     2025 01 24 08;
%     2025 01 24 09;
%     2025 01 24 10; %repeat
%     2025 01 24 11; %repeat
%     2025 01 24 12; %repeat
%     ];
% index = index +1;

% %% 
% % 201.1G, 4 Er pulse
% composite_data(index).Name = '2025_01_29 201.1 G 55Hz vary vert disp';
% composite_data(index).Description = '2.5 Er, 201.1 G, 63.7 mW 1 Er pulse';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [     
%     2025 01 29 04;
%     2025 01 29 05;
%     2025 01 29 06;
%     2025 01 30 01;
% %     2025 01 30 02; bad
%     2025 01 30 03;
% %     2025 01 30 04; bad
%     2025 01 30 05;
%     2025 01 30 06;
%     2025 01 30 07;
%     2025 01 30 08;
%     2025 01 30 09;
% %     2025 01 30 10; %bad
%     ];
% index = index +1;

%% 
% Vary ODT2 V piezo
% composite_data(index).Name = '2025_01_31 201.1 G 55Hz vary vert disp';
% composite_data(index).Description = '2.5 Er, 201.1 G, 64.5 mW 3 Er pulse';
% % composite_data(index).Type = 'spectrum';
% composite_data(index).Runs = [     
%     2025 01 30 18
%     2025 01 30 19
%     2025 01 30 20
% %     2025 01 30 21
%     2025 01 30 22
% %     2025 01 30 23
% %     2025 01 31 01 % bad cond fit
%     2025 01 31 02
%     2025 01 31 03
% %     2025 01 31 04 % bad FL --> bad cond fit 
%     2025 01 31 05
%     2025 01 31 06
%     2025 01 31 07
%     2025 01 31 08
%     2025 01 31 09
%     2025 01 31 10
%     2025 01 31 11
%     2025 01 31 12
% %     2025 01 31 13 % bad cond fit
%     2025 01 31 14
%     2025 01 31 15
%     ];
% index = index +1;

%% 
% Vary ODT2 V piezo
composite_data(index).Name = '2025_02_08 200.9 G spectra 64.8 mW 4.5Er pulse';
composite_data(index).Description = '2.5 Er, 200.9 G, 64.8 mW 4.5 Er pulse';
% composite_data(index).Type = 'spectrum';
composite_data(index).Runs = [     

    2025 02 08 25
    2025 02 08 26
    2025 02 08 27
    2025 02 08 28
    2025 02 09 01
    2025 02 09 02
    2025 02 09 03
    2025 02 09 04
    2025 02 09 05
    2025 02 09 06
    2025 02 09 07
    2025 02 09 08
    2025 02 09 09
    2025 02 09 10
    2025 02 09 11
%     2025 02 09 12
%     2025 02 09 13
%     2025 02 09 14
%     2025 02 09 15
%     2025 02 09 16
    ];
index = index +1;

%% Redo Analysis
do_redo_analysis =0;    % Do you want to run analysis on it?

if do_redo_analysis
    opts=struct;
    opts.do_ixon_main           = 1;   % ixon_main
    opts.do_ixon_bin_analysis   = 1;   % ixon_bing
    opts.do_ixon_dig_analysis   = 1;   % ixon_dig
    ixon_super(composite_data,opts)
end

%% Gather Data
composite_data = gatherCompositeData(composite_data);

